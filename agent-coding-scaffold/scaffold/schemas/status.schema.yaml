schema_version: 1
title: status
type: object
required:
  - schema_version
  - project
  - status
  - summary
  - milestones
  - activity_log
  - sync_state
properties:
  schema_version:
    type: integer
    enum: [1]
  project:
    type: object
    required: [id, name, repo]
    properties:
      id:
        type: string
      name:
        type: string
      repo:
        type: string
  status:
    type: object
    required: [lifecycle, priority, progress, tags]
    properties:
      lifecycle:
        type: string
        enum: [planning, in-progress, paused, completed, cancelled]
      priority:
        type: string
        enum: [low, medium, high, urgent]
      progress:
        type: integer
        minimum: 0
        maximum: 100
      tags:
        type: array
        items:
          type: string
  summary:
    type: object
    required: [goal, acceptance]
    properties:
      goal:
        type: string
      acceptance:
        type: array
        items:
          type: string
  milestones:
    type: array
    items:
      type: object
      required: [name, status]
      properties:
        name:
          type: string
        status:
          type: string
          enum: [todo, doing, done, blocked]
  activity_log:
    type: array
    items:
      type: object
  sync_state:
    type: object
    required: [sync_status, last_sync_at, last_sync_result, resolved_project_id, last_run_id, last_event_id, errors]
    properties:
      sync_status:
        type: string
        enum: [not_started, local_only, remote_synced, remote_sync_failed]
      last_sync_at:
        anyOf:
          - type: "null"
          - type: string
      last_sync_result:
        type: string
        enum: [not_started, success, partial, failed]
      resolved_project_id:
        anyOf:
          - type: "null"
          - type: string
      last_run_id:
        anyOf:
          - type: "null"
          - type: string
      last_event_id:
        anyOf:
          - type: "null"
          - type: string
      errors:
        type: array
        items:
          type: string
