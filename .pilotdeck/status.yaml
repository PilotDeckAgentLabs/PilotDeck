schema_version: 1

project:
  key: "pilotdeck"
  name: "PilotDeck"
  repo: "local-repo"
  owner: "maintainer"

pilotdeck:
  name: "PilotDeck"
  base_url: "http://182.92.109.59:8689/api"
  project_id: "proj-46e1c1d8"
  agent_id: "opencode/sisyphus"
  agent_token_env: "PM_AGENT_TOKEN"

status:
  lifecycle: "in-progress"
  priority: "medium"
  progress: 90
  category: "platform"
  tags: ["pilotdeck", "agent", "project-management", "desktop-integration", "agentops", "documentation", "deployment"]

summary:
  goal: "Provide a self-hosted project management and agent collaboration console"
  success_criteria:
    - "Agents can update project status via Agent API"
    - "Status documents stay in sync with PilotDeck"

milestones:
  - name: "Core API and UI"
    status: "done"
    due: "2026-02-01"
    notes: "Agent API, projects, events, runs, and Vue UI available"
  - name: "Project status template"
    status: "done"
    due: "2026-02-05"
    notes: "Added status template and skill design docs"
  - name: "Timeline UI modernization"
    status: "done"
    due: "2026-02-11"
    notes: "Created modern Agent timeline visualization with Vue 3 components"
  - name: "Documentation architecture refactoring"
    status: "done"
    due: "2026-02-11"
    notes: "Implemented frontend/backend separation with high cohesion, low coupling"
  - name: "Production deployment documentation"
    status: "done"
    due: "2026-02-11"
    notes: "Created comprehensive deployment guide (DEPLOYMENT.md, 720 lines) covering systemd, Node.js, backups, and troubleshooting"
  - name: "Dual authentication for Projects API"
    status: "done"
    due: "2026-02-11"
    notes: "Implemented require_login_or_agent decorator enabling both Web UI (session) and Agent (token) access to /api/projects endpoints"

next_actions:
  - "Implement real-time updates (WebSocket)"
  - "Add Gantt chart timeline view"
  - "Enhance analytics dashboard"

risks:
  - title: "Concurrent updates"
    impact: "Progress overwritten by multiple agents"
    mitigation: "Use updatedAt + ifUpdatedAt conflict handling"

dependencies:
  - name: "PilotDeck server"
    status: "available"
    notes: "Running at 182.92.109.59:8689"

links:
  - title: "ARCHITECTURE"
    url: "docs/ARCHITECTURE.md"
  - title: "AGENT_API"
    url: "docs/agent/AGENT_API.zh-CN.md"

activity_log:
  - ts: "2026-02-05T00:20:00+08:00"
    author: "opencode/sisyphus"
    summary: "Generated initial status document"
    details: "Created pilotdeck/status.yaml from template"
  - ts: "2026-02-05T00:25:43+08:00"
    author: "opencode/sisyphus"
    summary: "Synced status to PilotDeck"
    details: "Updated project status/priority/progress/tags via Agent API"
  - ts: "2026-02-05T21:07:45+08:00"
    author: "opencode/sisyphus"
    summary: "Fixed progress column and project detail fields"
    details: "Aligned table borders, normalized budget/actual cost, and updated progress sync"
  - ts: "2026-02-06T19:00:20+08:00"
    author: "opencode/sisyphus"
    summary: "Synced session execution record via pilotdeck-skill workflow"
    details: "Created run run-60fdc6fa, wrote actions/events, patched project summary, and finalized run after server/docs updates"
  - ts: "2026-02-11T18:57:00+08:00"
    author: "opencode/sisyphus"
    summary: "Completed documentation architecture refactoring"
    details: "Refactored documentation to frontend/backend separation: created 5 new docs, moved 9 files, updated 4 files with cross-references. Verified builds pass (frontend 1.54s, backend health 200 OK). Progress: 72% -> 85%. Committed 6592fd9 and pushed to origin/main."
  - ts: "2026-02-11T20:10:00+08:00"
    author: "opencode/sisyphus"
    summary: "Created production deployment documentation"
    details: "Created comprehensive DEPLOYMENT.md (720 lines) covering prerequisites, Node.js v22.x installation, systemd service configuration, automated backups, Nginx proxy, and troubleshooting. Updated 3 documentation indexes. Committed c47232d."
  - ts: "2026-02-11T20:15:00+08:00"
    author: "opencode/sisyphus"
    summary: "Implemented dual authentication for Projects API"
    details: "Added require_login_or_agent decorator supporting both Web UI (session cookie) and Agent (token header) authentication. Updated all 8 /api/projects endpoints. Verified PATCH /api/projects/<id> accessible without session. Redeployed server. Committed e5517b6 and pushed to origin/main."
  - ts: "2026-02-11T20:28:00+08:00"
    author: "opencode/sisyphus"
    summary: "Synced project status to PilotDeck server"
    details: "Executed full pilotdeck-skill workflow: created run run-22636052, synced progress (72% -> 90%), added tags (documentation, deployment), wrote milestone event, and finalized run. Updated sync_state with last_project_updated_at: 2026-02-11T20:25:58.845264."

sync_state:
  last_sync_at: "2026-02-11T20:28:00+08:00"
  last_sync_result: "success"
  last_project_updated_at: "2026-02-11T20:25:58.845264"
  last_run_id: "run-22636052"
  notes: "Successfully synced progress (90%), tags (documentation, deployment), and milestones to PilotDeck server."
